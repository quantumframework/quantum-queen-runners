---
- hosts: "{{ UM_RUNNERS_GRP|default('runners') }}"
  tasks:
  - name: installed dnf
    vars:
      ansible_python_interpreter: /usr/bin/python
    yum:
      state: present
      name: dnf

- hosts: "{{ UM_RUNNERS_GRP|default('runners') }}"
  tasks:

  - name: "installed IUS repository"
    dnf:
      state: present
      name: https://centos7.iuscommunity.org/ius-release.rpm

  - name: "installed Python 3"
    vars:
      packages:
      - python36
      - python36-libs
      - python36-devel
      - python36-pip
      - python36-setuptools
    dnf:
      state: present
      name: "{{ packages }}"

  - name: installed common dependencies
    vars:
      packages:
      - lxml==4.3.4
      - requests==2.22.0
      - quantum-queen==1.0.3
      - openshift==0.8.1
    pip:
      state: present
      name: "{{ packages }}"
      executable: pip-3.6
